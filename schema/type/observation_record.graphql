
# Observation status
enum ObservationStatus {
    # The existence of the observation is registered, but there is no result yet available.
    OBSERVATION_REGISTERED
    
    # Preliminary   This is an initial or interim observation: data may be incomplete or unverified.
    OBSERVATION_PRELIMINARY 
    
    # The observation is complete.
    OBSERVATION_FINAL 
    
    # Subsequent to being Final, the observation has been modified subsequent. This includes updates/new information and corrections.
    OBSERVATION_AMENDED 
    
    # Subsequent to being Final, the observation has been modified to correct an error in the test result.
    OBSERVATION_CORRECTED 
    
    # The observation is unavailable because the measurement was not started or not completed
    OBSERVATION_CANCELLED 
    
    # The observation has been withdrawn following previous final release. This electronic record should never have existed, though it is possible that real-world decisions were based on it.
    OBSERVATION_ENTERED_IN_ERROR 
    
    # The authoring system does not know which of the status values currently applies for this request. Note: This concept is not to be used for "other" - one of the listed statuses is presumed to apply, but the authoring system does not know which.
    OBSERVATION_UNKNOWN 
}

# Observation category - Classification of type of observation
enum ObservationCategory {
    # The Social History Observations define the patient's occupational, personal (e.g. lifestyle), social, and environmental history and health risk factors
    OBSERVATION_CATEGORY_SOCIALHISTORY
    
    # Clinical observations measure the body's basic functions such as such as blood pressure, heart rate, respiratory rate, height, weight, body mass index, head circumference, pulse oximetry, temperature, and body surface area
    OBSERVATION_CATEGORY_VITALSIGNS
    
    # Observations generated by imaging. The scope includes observations, plain x-ray, ultrasound, CT, MRI, angiography, echocardiography, nuclear medicine.
    OBSERVATION_CATEGORY_IMAGING
    
    # The results of observations generated by laboratories. Laboratory results are typically generated by laboratories providing analytic services in areas such as chemistry, hematology, serology, histology, cytology
    OBSERVATION_CATEGORY_LABORATORY
    
    # Observations generated by other procedures. This category includes observations resulting from interventional and non-interventional procedures excluding lab and imaging
    OBSERVATION_CATEGORY_PROCEDURE
    
    # Assessment tool/survey instrument observations (e.g. Apgar Scores, Montreal Cognitive Assessment (MoCA))
    OBSERVATION_CATEGORY_SURVEY
    
    # Observations generated by physical exam findings including direct observations made by a clinician
    OBSERVATION_CATEGORY_EXAM
    
    # Observations generated by non-interventional treatment protocols
    OBSERVATION_CATEGORY_THERAPY
}

# Array of observations
input ObservationRecordsCreate {
   observations: [ObservationRecordCreate!]
}

# FHIR compliant observation -Observations are a central element in healthcare, used to support diagnosis, monitor progress
input ObservationRecordCreate  {
    # From health record
    name: String!
    consumerID: String!
    description: String
    occurred: Time!
    source: String!  
    organization: String  
    sourceRecordID: SourceRecordIDInput
    references: [ReferenceHealthRecordInput!]
    location: GeoLocationInput 

    # Observation
    status: ObservationStatus!
    category: ObservationCategory!
    categoryCode: CodableConceptInput
    code: CodableConceptInput
    performer: ReferenceActorInput 
    effective: PeriodInput
    value: ValueInput!
    dataAbsentReason: String 
    dataAbsentReasonCode: CodableConceptInput
    interpretation: String 
    interpretationCode: CodableConceptInput
    comment: String
    bodySite: String 
    bodySiteCode: CodableConceptInput
    method: String 
    methodCode: CodableConceptInput 
    device: ReferenceEntityInput
    referenceRange: [ReferenceRangeInput!]
}

# FHIR compliant observation -Observations are a central element in healthcare, used to support diagnosis, monitor progress
type ObservationRecord implements HealthRecord {
    # From health record
    id: String!
    consumerID: String!
    previousRecord: String
    recordType: HealthRecordType!
    transactionType: HealthRecordTransactionType!
    name: String!
    description: String
    occurred: Time!
    source: String!    
    created: Time!
    organization: String
    sourceRecordID: SourceRecordID
    createdBy: String
    references: [ReferenceHealthRecord!]
    location: GeoLocation

    # Observation
    status: ObservationStatus!
    category: ObservationCategory!
    categoryCode: CodableConcept
    code: CodableConcept
    performer: ReferenceActor
    effective: Period
    value: Value!
    dataAbsentReason: String 
    dataAbsentReasonCode: CodableConcept
    interpretation: String 
    interpretationCode: CodableConcept 
    comment: String
    bodySite: String 
    bodySiteCode: CodableConcept
    method: String 
    methodCode: CodableConcept 
    device: ReferenceEntity
    referenceRange: [ReferenceRange!]
}
