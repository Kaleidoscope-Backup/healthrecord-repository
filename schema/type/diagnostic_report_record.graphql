
# registered | partial | preliminary | final +
enum DiagnosticReportStatus {
   DIAGNOSTICREPORT_REGISTERED
   DIAGNOSTICREPORT_PARTIAL
   DIAGNOSTICREPORT_PRELIMINARY
   DIAGNOSTICREPORT_FINAL
}

input DiagnosticReportPerformerInput {
    role: String!
    roleCode: CodableConceptInput  
    actor: ReferenceActorInput!
}

type DiagnosticReportPerformer {
    id: String!
    role: String!
    roleCode: CodableConcept 
    actor: ReferenceActor!
}

input DiagnosticReportRecordCreate {
    # From health record
    name: String!
    consumerID: String!
    description: String
    occurred: Time!
    source: String!  
    organization: String  
    sourceRecordID: SourceRecordIDInput
    references: [ReferenceHealthRecordInput!]
    location: GeoLocationInput 

    # diagnostics report
    basedOn: ReferenceHealthRecordInput!
    status: DiagnosticReportStatus!
    category: String!
    categoryCode: CodableConceptInput
    context: ReferenceHealthRecordInput 
    effectiveDateTime: Time 
    effectivePeriod: PeriodInput 
    issued: Time 
    performer: [DiagnosticReportPerformerInput!]
    result: [ReferenceHealthRecordInput!]
    imagingStudy: [AttachmentInput!]
    conclusion: String!
    codedDiagnosis: CodableConceptInput 
    presentedForm: AttachmentInput  
}

# A diagnostic report is the set of information that is 
# typically provided by a diagnostic service when investigations are complete. 
type DiagnosticReportRecord implements HealthRecord {
    # From health record
    id: String!
    consumerID: String!
    previousRecord: String
    recordType: HealthRecordType!
    transactionType: HealthRecordTransactionType!
    name: String!
    description: String
    occurred: Time!
    source: String!    
    created: Time!
    organization: String
    sourceRecordID: SourceRecordID
    createdBy: String
    references: [ReferenceHealthRecord!]
    location: GeoLocation

    # diagnostics report
    basedOn: ReferenceHealthRecord!
    status: DiagnosticReportStatus!
    category: String!
    categoryCode: CodableConcept
    context: ReferenceHealthRecord 
    effectiveDateTime: Time 
    effectivePeriod: Period 
    issued: Time 
    performer: [DiagnosticReportPerformer!]
    result: [ReferenceHealthRecord!]
    imagingStudy: [Attachment!]
    conclusion: String!
    codedDiagnosis: CodableConcept 
    presentedForm: Attachment  
}