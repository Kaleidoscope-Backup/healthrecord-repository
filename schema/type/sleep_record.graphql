
enum SleepStageType {
    STAGE_WAKE
    STAGE_REM
    STAGE_N1
    STAGE_N2
    STAGE_N3
    STAGE_N4
}

type SleepStage {
    id: String!
    type: SleepStageType
    duration: Float
    latency: Float
    totalSleepTime: Float
    sleepPeriodTime: Float
}

input SleepStageInput {
    type: SleepStageType
    duration: Float
    latency: Float
    totalSleepTime: Float
    sleepPeriodTime: Float
}

input SleepContinuityInput {
    sourceOfArousal: String
    nermCount: Int
    nermIndex: Float
    remCount: Int
    remIndex: Float
    totalCount: Int
    totalIndex: Float
}

type SleepContinuity {
    id: String!
    sourceOfArousal: String
    nermCount: Int
    nermIndex: Float
    remCount: Int
    remIndex: Float
    totalCount: Int
    totalIndex: Float
}

# sleep record create
input SleepRecordCreate {
    # From health record create
    name: String!
    consumerID: String!
    description: String
    occurred: Time!
    source: String!  
    organization: String  
    sourceRecordID: SourceRecordIDInput
    references: [ReferenceHealthRecordInput!]
    location: GeoLocationInput 

    # sleep study relared record
    startTime: Time!
    endTime: Time!
    mainSleep: Boolean
    timeUnit: String
    totalRecordingTime: Float
    totalSleepTime: Float
    timeAwake: Float
    sleepEfficiency: Float
    timeToFallAsleep: Float
    numberOfAwekenings: Int
    timeAfterWakeup: Float
    timeInBed: Float
    sleepStageSummary: [SleepStageInput!]
    sleepContinuities: [SleepContinuityInput!]
}

# Sleep - sleep study related record
type SleepRecord implements HealthRecord {
    # From health record
    id: String!
    consumerID: String!
    previousRecord: String
    recordType: HealthRecordType!
    transactionType: HealthRecordTransactionType!
    name: String!
    description: String
    occurred: Time!
    source: String!    
    created: Time!
    organization: String
    sourceRecordID: SourceRecordID
    createdBy: String
    references: [ReferenceHealthRecord!]
    location: GeoLocation

    # sleep study relared record
    startTime: Time!
    endTime: Time!
    mainSleep: Boolean
    timeUnit: String
    totalRecordingTime: Float
    totalSleepTime: Float
    timeAwake: Float
    sleepEfficiency: Float
    timeToFallAsleep: Float
    numberOfAwekenings: Int
    timeAfterWakeup: Float
    timeInBed: Float
    sleepStageSummary: [SleepStage!]
    sleepContinuities: [SleepContinuity!]
}